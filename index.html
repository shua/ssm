<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link type="text/css" rel="stylesheet" href="style.css"/>
<script src="cmdline.js"></script>
<script src="stream.js"></script>
<script>
function addstream(div) {
	ct = document.getElementsByClassName("container")[0]
	ct.appendChild(div)
	if(strs.length !== 0) strs[cur].id=""
	cur = strs.push(div) - 1
	setcurmaster()
}

window.onload = function() {
	initcmdline()
	inityt()
}
function handleKeyKEY(k) {
	switch (k) {
	case ":":
		cmdline.focus()
		break
	case "j":
		focusnext(1)
		break
	case "k":
		focusnext(-1)
		break
	case "s":
		setcurmaster()
		break
	}
}
cmds = {
	"open": function(args) {
		console.log("open ",args)
	},
	"youtube": function(args) {
		console.log("yt", args)
		addyt(args[0])
	},
	"birds": function(args) {
		morebirds()
	}
}
cmds["yt"] = cmds["youtube"]
var cur = 0
var strs = new Array();
var num_master = 1
function focusnext(dir) {
	if (strs.length === 0) return
	strs[cur].id = ""
	cur += dir;
	if (cur < 0) cur = strs.length - 1
	if (cur >= strs.length) cur = 0
	strs[cur].id = "cur"
}
function setcurmaster() {
	if(strs[cur].className.indexOf("master") === -1) {
		pm = strs[num_master-1]
		pm.className = pm.className.replace(/(?:^|\s)master(?!\S)/g, '')
		strs[cur].className += " master"
	}
	i = strs[cur]
	strs.splice(cur, 1)
	strs.unshift(i)
	cur = 0
	reorder()
}
function reorder() {
	for(let i=0; i<strs.length; i++) {
		strs[i].style.order=i
	}
}
function morebirds() {
	cmds["youtube"](["u9Sk6-LIvDc"])
	cmds["youtube"](["JfXiBkL9U5s"])
	cmds["youtube"](["qF6YkiJXfEA"])
	cmds["youtube"](["IiFSeJhHMgY"])
}
</script>
</head>
<body class="horz">
<input type="text" tabindex="-1" class="cmdline"/>
<div class="container"></div>
</body>
</html>